{"version":3,"sources":["webpack:///./src/views/hirunner/testPlan/TestPlanEditor.vue?d7a2","webpack:///./src/views/hirunner/testPlan/TestPlanEditor.vue","webpack:///src/views/hirunner/testPlan/TestPlanEditor.vue","webpack:///./src/views/hirunner/testPlan/TestPlanEditor.vue?c9c5","webpack:///./src/views/hirunner/testPlan/TestPlanEditor.vue?d399"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_m","ref","attrs","form","rules","status","on","$event","changeScheduleSwitch","model","value","callback","$$v","$set","expression","name","stage","_l","stageOptions","item","key","label","gitRepository","gitBranch","jenkinsNode","runCmd","crontabSwitch","crontabExpression","slot","_v","_e","emailSwitch","emailSendto","saving","save","back","staticRenderFns","data","releasePlanId","productId","devUsers","testUsers","versionNo","required","message","trigger","validator","gitRepositoryValidator","testPlanId","curVersionNo","versionList","curProductId","productVersionList","popoverActive","taskText","created","testPlanInfo","localStorage","getItem","JSON","parse","id","getProductVersion","methods","localProductVersionList","getCurProductId","localCurProductVersion","getVersionList","forEach","setTaskText","$refs","validate","valid","trim","curProductVersion","param","$notifyMessage","type","url","$http","put","then","post","$router","go","component"],"mappings":"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","file":"js/chunk-1a123b50.cf2b0dd1.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestPlanEditor.vue?vue&type=style&index=0&id=6d76437d&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"content-info\",staticStyle:{\"clear\":\"both\"}},[_vm._m(0),_c('el-form',{ref:\"form\",staticClass:\"form-box\",attrs:{\"label-width\":\"124px\",\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"status\",\"label\":\"计划状态\"}},[_c('el-switch',{attrs:{\"active-text\":_vm.form.status,\"active-value\":\"已开启\",\"active-color\":\"rgb(22,140,0)\",\"inactive-value\":\"已关闭\",\"inactive-color\":\"rgb(200,0,0)\"},on:{\"change\":function($event){return _vm.changeScheduleSwitch()}},model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"name\",\"label\":\"计划名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入计划名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"stage\",\"label\":\"测试阶段\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.stage),callback:function ($$v) {_vm.$set(_vm.form, \"stage\", $$v)},expression:\"form.stage\"}},_vm._l((_vm.stageOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"gitRepository\",\"label\":\"git地址\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入git地址\"},model:{value:(_vm.form.gitRepository),callback:function ($$v) {_vm.$set(_vm.form, \"gitRepository\", $$v)},expression:\"form.gitRepository\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"gitBranch\",\"label\":\"git分支\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入git分支\"},model:{value:(_vm.form.gitBranch),callback:function ($$v) {_vm.$set(_vm.form, \"gitBranch\", $$v)},expression:\"form.gitBranch\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"jenkinsNode\",\"label\":\"运行节点\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入jenkins节点\"},model:{value:(_vm.form.jenkinsNode),callback:function ($$v) {_vm.$set(_vm.form, \"jenkinsNode\", $$v)},expression:\"form.jenkinsNode\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"runCmd\",\"label\":\"执行命令\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入执行命令\"},model:{value:(_vm.form.runCmd),callback:function ($$v) {_vm.$set(_vm.form, \"runCmd\", $$v)},expression:\"form.runCmd\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"crontabSwitch\",\"label\":\"定时任务开关\"}},[_c('el-switch',{attrs:{\"active-text\":_vm.form.crontabSwitch,\"active-value\":\"已开启\",\"active-color\":\"rgb(22,140,0)\",\"inactive-value\":\"已关闭\",\"inactive-color\":\"rgb(200,0,0)\"},on:{\"change\":function($event){return _vm.changeScheduleSwitch()}},model:{value:(_vm.form.crontabSwitch),callback:function ($$v) {_vm.$set(_vm.form, \"crontabSwitch\", $$v)},expression:\"form.crontabSwitch\"}})],1),(_vm.form.crontabSwitch === '已开启')?_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"crontabExpression\",\"label\":\"计划时间\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入crontab表达式\"},model:{value:(_vm.form.crontabExpression),callback:function ($$v) {_vm.$set(_vm.form, \"crontabExpression\", $$v)},expression:\"form.crontabExpression\"}},[_c('el-popover',{attrs:{\"slot\":\"suffix\",\"placement\":\"right\",\"width\":\"450\",\"trigger\":\"hover\"},slot:\"suffix\"},[_c('div',[_c('pre',[_c('b',[_vm._v(\"crontab表达式，共5位，最小粒度为分钟\")]),_vm._v(\"\\n*    *    *    *    *\\n-    -    -    -    -\\n|    |    |    |    |\\n|    |    |    |    +----- 星期中星期几 (0 - 6) (星期天 为0)\\n|    |    |    +---------- 月份 (1 - 12)\\n|    |    +--------------- 一个月中的第几天 (1 - 31)\\n|    +-------------------- 小时 (0 - 23)\\n+------------------------- 分钟 (0 - 59)\\n【每分钟】\\n* * * * *\\n【每小时的第一分】\\n1 * * * *\\n【每天7:50】\\n50 7 * * *\\n【每两个小时】\\n0 */2 * * *\\n【每月1号和15号】\\n0 0 1,15 * *\\n【每周一至周五3点钟】\\n00 03 * * 1-5\\n【每月的1、11、21、31日的6:30】\\n30 6 */10 * *\\n【每月每天的午夜0点20分, 2点20分, 4点20分】\\n20 0-23/2 * * *\\n【在12月内, 每天的早上6点到12点，每隔3个小时0分钟】\\n0 6-12/3 * 12 *\\n             \")])]),_c('i',{staticClass:\"el-icon-question\",attrs:{\"slot\":\"reference\"},slot:\"reference\"})])],1)],1):_vm._e(),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"emailSwitch\",\"label\":\"通知开关\"}},[_c('el-switch',{attrs:{\"active-text\":_vm.form.emailSwitch,\"active-value\":\"已开启\",\"active-color\":\"rgb(22,140,0)\",\"inactive-value\":\"已关闭\",\"inactive-color\":\"rgb(200,0,0)\"},on:{\"change\":function($event){return _vm.changeScheduleSwitch()}},model:{value:(_vm.form.emailSwitch),callback:function ($$v) {_vm.$set(_vm.form, \"emailSwitch\", $$v)},expression:\"form.emailSwitch\"}})],1),_c('el-form-item',{staticClass:\"custom-size\",attrs:{\"prop\":\"emailSendto\",\"label\":\"通知人列表\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入通知人列表\"},model:{value:(_vm.form.emailSendto),callback:function ($$v) {_vm.$set(_vm.form, \"emailSendto\", $$v)},expression:\"form.emailSendto\"}})],1),_c('el-form-item',{staticClass:\"custom-size\"}),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saving},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":_vm.back}},[_vm._v(\"取消\")])],1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"content-header\"},[_c('div',{staticClass:\"info-name\"},[_vm._v(\" 基本信息 \")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"clear: both;\" class=\"content-info\">\n    <div class=\"content-header\">\n      <div class=\"info-name\">\n        基本信息\n      </div>\n    </div>\n    <el-form class=\"form-box\" label-width=\"124px\" ref=\"form\" :model=\"form\" :rules=\"rules\">\n      <el-form-item class=\"custom-size\" prop=\"status\" label=\"计划状态\">\n        <el-switch\n          :active-text=\"form.status\"\n          active-value=\"已开启\"\n          active-color=\"rgb(22,140,0)\"\n          inactive-value=\"已关闭\"\n          inactive-color=\"rgb(200,0,0)\"\n          v-model=\"form.status\"\n          @change=\"changeScheduleSwitch()\"\n        >\n        </el-switch>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"name\" label=\"计划名称\">\n        <el-input v-model=\"form.name\" placeholder=\"请输入计划名称\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"stage\" label=\"测试阶段\">\n        <el-select v-model=\"form.stage\" placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in stageOptions\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"gitRepository\" label=\"git地址\">\n        <el-input v-model=\"form.gitRepository\" placeholder=\"请输入git地址\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"gitBranch\" label=\"git分支\">\n        <el-input v-model=\"form.gitBranch\" placeholder=\"请输入git分支\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"jenkinsNode\" label=\"运行节点\">\n        <el-input v-model=\"form.jenkinsNode\" placeholder=\"请输入jenkins节点\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"runCmd\" label=\"执行命令\">\n        <el-input v-model=\"form.runCmd\" placeholder=\"请输入执行命令\"></el-input>\n      </el-form-item>\n      <!--\n      <el-form-item class=\"custom-size\" prop=\"testUsers\" label=\"测试负责人\">\n        <el-input v-model=\"form.testUsers\" placeholder=\"请输入测试负责人\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"devUsers\" label=\"开发负责人\">\n        <el-input v-model=\"form.devUsers\" placeholder=\"请输入开发负责人\"></el-input>\n      </el-form-item>\n      -->\n      <el-form-item class=\"custom-size\" prop=\"crontabSwitch\" label=\"定时任务开关\">\n        <el-switch\n        :active-text=\"form.crontabSwitch\"\n        active-value=\"已开启\"\n        active-color=\"rgb(22,140,0)\"\n        inactive-value=\"已关闭\"\n        inactive-color=\"rgb(200,0,0)\"\n          v-model=\"form.crontabSwitch\"\n          @change=\"changeScheduleSwitch()\"\n        >\n        </el-switch>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"crontabExpression\" label=\"计划时间\" v-if=\"form.crontabSwitch === '已开启'\">\n        <el-input v-model=\"form.crontabExpression\" placeholder=\"请输入crontab表达式\">\n          <el-popover slot=\"suffix\" placement=\"right\" width=\"450\" trigger=\"hover\">\n            <div>\n              <pre>\n<b>crontab表达式，共5位，最小粒度为分钟</b>\n*    *    *    *    *\n-    -    -    -    -\n|    |    |    |    |\n|    |    |    |    +----- 星期中星期几 (0 - 6) (星期天 为0)\n|    |    |    +---------- 月份 (1 - 12)\n|    |    +--------------- 一个月中的第几天 (1 - 31)\n|    +-------------------- 小时 (0 - 23)\n+------------------------- 分钟 (0 - 59)\n【每分钟】\n* * * * *\n【每小时的第一分】\n1 * * * *\n【每天7:50】\n50 7 * * *\n【每两个小时】\n0 */2 * * *\n【每月1号和15号】\n0 0 1,15 * *\n【每周一至周五3点钟】\n00 03 * * 1-5\n【每月的1、11、21、31日的6:30】\n30 6 */10 * *\n【每月每天的午夜0点20分, 2点20分, 4点20分】\n20 0-23/2 * * *\n【在12月内, 每天的早上6点到12点，每隔3个小时0分钟】\n0 6-12/3 * 12 *\n             </pre>\n            </div>\n            <i slot=\"reference\" class=\"el-icon-question\"></i>\n          </el-popover>\n        </el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"emailSwitch\" label=\"通知开关\">\n        <el-switch\n        :active-text=\"form.emailSwitch\"\n        active-value=\"已开启\"\n        active-color=\"rgb(22,140,0)\"\n        inactive-value=\"已关闭\"\n        inactive-color=\"rgb(200,0,0)\"\n          v-model=\"form.emailSwitch\"\n          @change=\"changeScheduleSwitch()\"\n        >\n        </el-switch>\n      </el-form-item>\n      <el-form-item class=\"custom-size\" prop=\"emailSendto\" label=\"通知人列表\">\n        <el-input v-model=\"form.emailSendto\" placeholder=\"请输入通知人列表\"></el-input>\n      </el-form-item>\n      <el-form-item class=\"custom-size\"></el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\" :loading=\"saving\">保存</el-button>\n        <el-button @click=\"back\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport { gitRepositoryValidator } from \"@/utils/const\";\nexport default {\n  data() {\n    return {\n      form: {\n        name: \"\",\n        releasePlanId:\"\",\n        productId:\"\",\n        stage:\"\",\n        devUsers: \"\",\n        testUsers:\"\",\n        gitRepository: \"\",\n        gitBranch: \"\",\n        jenkinsNode: \"\",\n        runCmd:\"\",\n        status:\"\",\n        crontabSwitch:\"\",\n        crontabExpression:\"\",\n        emailSwitch:\"\",\n        emailSendto:\"\",\n        versionNo:\"\",\n      },\n      stageOptions:[\n        { value: '冒烟测试', label: '冒烟测试' },\n        { value: 'SIT测试', label: 'SIT测试' },\n        { value: '回归测试', label: '回归测试' },\n        { value: '灰度测试', label: '灰度测试' },\n        { value: '其他测试', label: '其他测试' }\n      ],\n      rules: {\n        name: [{ required: true, message: \"请输入计划名称\", trigger: \"blur\" }],\n        stage: [{ required: true, message: \"请选择测试阶段\", trigger: \"blur\" }],\n        gitRepository: [\n          { required: true, message: \"请输入git地址\", trigger: \"blur\" },\n          { validator: gitRepositoryValidator, trigger:\"blur\" }\n        ],\n        gitBranch: [{ required: true, message: \"请输入git分支\", trigger: \"blur\" }],\n        jenkinsNode: [{ required: true, message: \"请输入运行节点\", trigger: \"blur\" }],\n        runCmd: [{ required: false, message: \"请输入执行命令\", trigger: \"blur\"}],\n      },\n      saving: false,\n      testPlanId: \"\",\n      curVersionNo: \"\",\n      versionList: [],\n      curProductId: \"\",\n      productVersionList: [],\n      popoverActive: false,\n      taskText: \"关闭\",\n    };\n  },\n  created() {\n    let testPlanInfo = localStorage.getItem(\"testPlanInfo\");\n    if (testPlanInfo) {\n      testPlanInfo = JSON.parse(testPlanInfo);\n      this.testPlanId = testPlanInfo.id;\n      this.form.name = testPlanInfo.name;\n      this.form.releasePlanId = testPlanInfo.releasePlanId;\n      this.form.stage = testPlanInfo.stage;\n      this.form.devUsers = testPlanInfo.devUsers;\n      this.form.testUsers = testPlanInfo.testUsers;\n      this.form.gitRepository = testPlanInfo.gitRepository;\n      this.form.gitBranch = testPlanInfo.gitBranch;\n      this.form.jenkinsNode = testPlanInfo.jenkinsNode;\n      this.form.runCmd = testPlanInfo.runCmd;\n      this.form.status = testPlanInfo.status;\n      this.form.crontabSwitch = testPlanInfo.crontabSwitch;\n      this.form.crontabExpression = testPlanInfo.crontabExpression;\n      this.form.emailSwitch = testPlanInfo.emailSwitch;\n      this.form.emailSendto = testPlanInfo.emailSendto;\n      this.form.versionNo = testPlanInfo.versionNo;\n    }\n    this.getProductVersion();\n  },\n\n  methods: {\n    getProductVersion() {\n      let localProductVersionList = JSON.parse(localStorage.getItem(\"productVersionList\"));\n      if (localProductVersionList) {\n        this.productVersionList = localProductVersionList;\n      }\n    },\n    getCurProductId() {\n      let localCurProductVersion = JSON.parse(localStorage.getItem(\"curProductVersion\"));\n      if (localCurProductVersion) {\n        this.curProductId = localCurProductVersion.curProductId;\n      }\n    },\n    getVersionList() {\n      this.getCurProductId();\n      this.productVersionList.forEach(item => {\n        if (item.productId === this.curProductId) {\n          this.versionList = item.versionList;\n        }\n      });\n    },\n    setTaskText() {\n      if (this.form.status === \"1\") {\n        this.taskText = \"开启\";\n      }\n      if (this.form.status === \"0\") {\n        this.taskText = \"关闭\";\n      }\n    },\n    changeScheduleSwitch() {\n      //this.setTaskText(); //前面已经在active-text中用form.status 解决了，注意这里的已开启和已关闭中文要与后台枚举值类型保持一致。\n\n    },\n    save() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.saving = true;\n          this.form.name = this.form.name.trim();\n          this.form.stage = this.form.stage.trim();\n          let curProductVersion = JSON.parse(localStorage.getItem(\"curProductVersion\"));\n          let productId = curProductVersion.curProductId;\n          let curVersionNo = curProductVersion.curVersionNo;\n          let param = {\n            name: this.form.name,\n            stage: this.form.stage,\n            status: this.form.status,\n            gitRepository: this.form.gitRepository,\n            gitBranch: this.form.gitBranch,\n            jenkinsNode: this.form.jenkinsNode,\n            runCmd: this.form.runCmd,\n            devUsers: this.form.devUsers,\n            testUsers: this.form.testUsers,\n            crontabSwitch: this.form.crontabSwitch,\n            crontabExpression: this.form.crontabExpression,\n            emailSwitch: this.form.emailSwitch,\n            emailSendto: this.form.emailSendto,\n            versionNo: curVersionNo,\n            productId: productId,\n            releasePlanId: this.form.releasePlanId,\n          };\n          // 如果打开了开关，检查必填字段\n          if(param.status === \"已开启\" && !param.runCmd){\n            this.$notifyMessage(\"执行命令不能为空！\",{type:\"error\"})\n            return\n          }\n          if (this.testPlanId) {\n            let url = `/hirunner/testPlans/${this.testPlanId}`;\n            this.$http.put(url, param).then(() => {\n              this.back();\n              this.$notifyMessage(\"修改计划成功\", { type: \"success\" });\n            });\n          } else {\n            let url = `/hirunner/testPlans`;\n            this.$http.post(url, param).then(() => {\n              this.back();\n              this.$notifyMessage(\"新增计划成功\", { type: \"success\" });\n            });\n          }\n          this.saving = false;\n        } else {\n          return false;\n        }\n      });\n    },\n    back() {\n      this.$router.go(-1);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.form-box {\n  margin-top: 16px;\n  .custom-size .el-form-item__content,\n  .custom-size .el-select,\n  .custom-size .el-select > .el-input {\n    width: 380px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestPlanEditor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestPlanEditor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TestPlanEditor.vue?vue&type=template&id=6d76437d&scoped=true\"\nimport script from \"./TestPlanEditor.vue?vue&type=script&lang=js\"\nexport * from \"./TestPlanEditor.vue?vue&type=script&lang=js\"\nimport style0 from \"./TestPlanEditor.vue?vue&type=style&index=0&id=6d76437d&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d76437d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}